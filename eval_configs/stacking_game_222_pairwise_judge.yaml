# Configuration for the Stacking Game Task with Step Selection (Pairwise Judge)
# This example uses LLM-as-judge with pairwise comparison to rank and select actions

runner:
  experiment_name: stacking_game_pairwise_judge
  log_dir: "logs"
  results_excel_path: "experiment_results.xlsx"
  history_length: 5

agent:
  type: "openai"
  model_name: "qwen/qwen3-vl-30b-a3b-thinking"
  # API key and base URL are loaded from environment variables (.env file or system export)
  api_key: null
  base_url: null
  temperature: 0.1
  max_tokens: 128000
  timeout: 300.0

judgement:
  type: "openai"
  model_name: "bytedance-seed/seed-1.6-flash"
  api_key: null
  base_url: null
  temperature: 0.1
  max_tokens: 4000
  timeout: 300.0

environment:
  type: "stacking_game"
  gui: false
  render_width: 512
  render_height: 512
  multi_view: true
  load_table: false
  max_steps: 6
  puzzle_dir: "assets/stacking_game/puzzles_full_v9"
  default_size: "2x2x2"
  default_puzzle_id: "puzzle_001"
  randomize_on_reset: true
  init_spacing: 2
  init_seed: null
  render_unplaced: true

task:
  type: "stacking_game"
  name: "stacking_game_pairwise_judge"
  difficulty: easy
  puzzle_size: "2x2x2"
  puzzle_id: "puzzle_001"
  ruled_evaluation: true
  allow_random_puzzle: false
  init_seed: null

# Step Selection Configuration (Pairwise Judge)
step_selection:
  enabled: true
  
  # Selection method: "pairwise_judge" uses LLM to compare pairs of actions
  selection_method: "pairwise_judge"
  
  # Number of candidate actions to generate per step (for each beam)
  num_candidates: 3
  
  # Beam width: number of parallel paths to maintain (top-k best beams)
  # - top_k = 1: Greedy search (single best path)
  # - top_k > 1: Beam search (multiple parallel paths)
  top_k: 3
  
  # Pairwise judge configuration (uses OpenAI GPT-5 for accurate comparison)
  pairwise_judge_type: "openai"  # "openai" or "transformers"
  pairwise_judge_model: "gpt-5"  # GPT-5 for strong reasoning ability
  pairwise_api_key: null  # Uses OPENAI_API_KEY from environment
  pairwise_base_url: null  # Uses OPENAI_BASE_URL from environment
  pairwise_temperature: 0.1
  pairwise_max_tokens: 200
  
  # Sorting method for pairwise comparison:
  # - "bubble": O(n²) comparisons, simple but slow
  # - "merge": O(n log n) comparisons, balanced efficiency
  # - "full": O(n²) comparisons, compares all pairs for most accurate global ranking
  pairwise_sort_method: "merge"
  
  # Agent generation settings for multiple candidates
  candidate_temperature: 0.8  # Higher temperature for diversity in candidate generation
